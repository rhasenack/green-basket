<h1>DASHBOARD</h1>
<p><%= current_user.email %></p>

<h2>My Orders</h2>
<% if @orders.count == 0 %>
  <p>You don't have any order yet...</p>
  <p><%= link_for 'Check out the available baskets!', baskets_path %></p>
<% else %>
  <div class="orders-flex-box">
      <% @orders.each do |order| %>
        <div class="orders-card <%= order.status.capitalize %>">
          <h2><%= order.id %></h2>
          <p>User: <%= order.user.email %></p>
          <p>R$ <%= order.price %></p>
          <p>Status: <%= order.status.capitalize %></p>
        </div>
      <% end  %>
  </div>
<% end  %>

<button class="btn btn-primary" id="request-btn" data-toggle="button" aria-pressed="true" autocomplete="off"> Requested</button>
<button class="btn btn-primary" id="confirm-btn" data-toggle="button" aria-pressed="true" autocomplete="off"> Confirmed</button>
<button class="btn btn-primary" id="cancel-btn" data-toggle="button" aria-pressed="true" autocomplete="off"> Cancelled</button>


<h1>My Baskets</h1>
<div class="orders-flex-box">
  <% @baskets.each do |basket| %>
    <div class="basket-card">
      <h2><%= basket.id %></h2>
      <p>description: <%= basket.description %></p>
      <p>R$ <%= basket.price %></p>
      <p><%= basket.stock %></p>
      <p>Status: <%= basket.status.capitalize %></p>
      <button class="btn btn-primary show-orders-button" data-toggle="button" data-basketId ='<%=basket.id%>' aria-pressed="false" autocomplete="off"><strong><%=basket.orders.count%></strong> orders</button>
      <div class="basket-orders">
          <% basket.orders.each do |order| %>
            <div class="basket-orders-card basket-<%=basket.id%> d-none" >
              <h2><%= order.id %></h2>
              <p><%= order.user_id %></p>
              <p><%= order.price %></p>
              <p><%= order.status.capitalize %></p>
              <% if order.status.downcase == 'requested' %>
                <%= link_to "accept", accept_0rder_path(order), remote: true %>
                <%= link_to "decline", decline_order_path(order), remote: true %>
              <%elsif order.status.downcase == 'Confirmed'  %>
                <%= link_to "cancel", cancel_order_path(order), remote: true %>
              <%  end  %>
            </div>
          <% end %>
       </div>
    </div>
  <% end  %>
</div>
